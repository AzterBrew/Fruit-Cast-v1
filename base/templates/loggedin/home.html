{% extends "loggedin/layout.html" %}

{% block title %}
Fruit Cast | Home
{% endblock title %}

{% block navbar %}
    {% include "loggedin/navbar.html" %}
{% endblock navbar %}

{% block content %}
<div class="main-user py-5">

    <div class="row main-user-content justify-content-center">
        {% comment %} <div class="col-lg-8"> {% endcomment %}
            <div class="card shadow-sm rounded-4 p-4 mb-4 text-center" style="background: #fffefc;">
                <h1 class="mb-3 text-success fw-bold">Welcome to Fruit Cast, {{ user_firstname }}</h1>
                <p class="lead mb-4">Your partner in forecasting and monitoring Bataan's fruit supply.</p>
                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body d-flex flex-column justify-content-center align-items-center">
                                <h3 class="card-title mb-3"><i class="bi bi-bar-chart-line text-success me-2"></i>Forecast</h3>
                                <p class="card-text mb-3">Check out the current forecast of Bataan's fruit supply for the next year.</p>
                                <a class="btn btn-success" href="{% url 'dashboard:forecast' %}"><b>Go to Forecast</b></a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body d-flex flex-column justify-content-center align-items-center">
                                <h3 class="card-title mb-3"><i class="bi bi-graph-up-arrow text-success me-2"></i>Monitor</h3>
                                <p class="card-text mb-3">See the current status of the recorded fruit supply in Bataan based on our data.</p>
                                <a class="btn btn-success" href="{% url 'dashboard:monitor' %}"><b>Go to Monitor</b></a>
                            </div>
                        </div>
                    </div>
                </div>
                <hr class="my-4">
                <div>
                    <p class="mb-2">Ready to record your own fruit transactions?</p>
                    <a class="btn btn-outline-success" href="{% url 'base:newrecord' %}?view=choose">
                        <i class="bi bi-journal-plus me-2"></i>Start a New Record
                    </a>
                </div>
            </div>
        </div>
        <div class="col-lg-10 mt-4">
            <div class="card shadow-sm rounded-4 p-4" style="background: #fffefc;">
                <h2 class="mb-4 text-success fw-bold text-center"><i class="bi bi-lightbulb-fill me-2"></i>Recommended Crops to Plant</h2>
                
                {% if alternative_recommendations.short_term or alternative_recommendations.long_term %}
                    {% if alternative_recommendations.short_term %}
                    <div class="mb-4">
                        <h4 class="text-success"><i class="bi bi-hourglass-split me-2"></i>Short-Term (Matures in months)</h4>
                        <div class="row g-3">
                            {% for rec in alternative_recommendations.short_term %}
                            <div class="col-md-6">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title fw-bold">{{ rec.commodity_name }}</h5>
                                        <p class="card-text">{{ rec.reason }}</p>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}

                    {% if alternative_recommendations.long_term %}
                    <div>
                        <h4 class="text-success"><i class="bi bi-tree-fill me-2"></i>Long-Term (Matures in years)</h4>
                        <div class="row g-3">
                            {% for rec in alternative_recommendations.long_term %}
                            <div class="col-md-6">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title fw-bold">{{ rec.commodity_name }}</h5>
                                        <p class="card-text">{{ rec.reason }}</p>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                {% else %}
                    <p class="lead text-muted text-center">No new planting recommendations at this time.</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock content %}